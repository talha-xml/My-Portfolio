{"ast":null,"code":"var _jsxFileName = \"/home/talha/Desktop/REAL FS/frontend/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\"; // ✅ import\nimport \"../styles/Login.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [formData, setFormData] = useState({\n    identifier: \"\",\n    password: \"\"\n  });\n  const navigate = useNavigate();\n  const {\n    login\n  } = useContext(AuthContext); // ✅ get login function\n\n  const togglePasswordVisibility = () => setPasswordVisible(!passwordVisible);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n    try {\n      const response = await fetch(\"http://localhost:5000/api/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(formData)\n      });\n      const data = await response.json();\n      if (data.error) {\n        setError(data.error);\n      } else if (data.message && data.user) {\n        setSuccess(data.message);\n\n        // ✅ use context to log in\n        login(data.user, data.token);\n        setTimeout(() => {\n          navigate(\"/profile\");\n        }, 1000);\n      }\n    } catch (err) {\n      setError(\"⚠️ Unable to connect to the server. Please try again later.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"identifier\",\n          placeholder: \"Enter Email or Username\",\n          className: \"login-input\",\n          value: formData.identifier,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: passwordVisible ? \"text\" : \"password\",\n            name: \"password\",\n            placeholder: \"Password\",\n            className: \"login-input password-input\",\n            value: formData.password,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"toggle-password-btn\",\n            onClick: togglePasswordVisibility,\n            children: passwordVisible ? \"Hide\" : \"Show\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"login-btn\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-success\",\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"login-footer\",\n        children: [\"New to our service? \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: /*#__PURE__*/_jsxDEV(\"u\", {\n            children: \"Sign Up Here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"gKAvk1tDTzfFowW91nytG5wiYDE=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useContext","Link","useNavigate","AuthContext","jsxDEV","_jsxDEV","Login","_s","passwordVisible","setPasswordVisible","error","setError","success","setSuccess","formData","setFormData","identifier","password","navigate","login","togglePasswordVisibility","handleChange","e","target","name","value","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","message","user","token","setTimeout","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","onClick","to","_c","$RefreshReg$"],"sources":["/home/talha/Desktop/REAL FS/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";  // ✅ import\nimport \"../styles/Login.css\";\n\nfunction Login() {\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [formData, setFormData] = useState({ identifier: \"\", password: \"\" });\n\n  const navigate = useNavigate();\n  const { login } = useContext(AuthContext);  // ✅ get login function\n\n  const togglePasswordVisibility = () => setPasswordVisible(!passwordVisible);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n\n    try {\n      const response = await fetch(\"http://localhost:5000/api/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await response.json();\n\n      if (data.error) {\n        setError(data.error);\n      } else if (data.message && data.user) {\n        setSuccess(data.message);\n\n        // ✅ use context to log in\n        login(data.user, data.token);\n\n        setTimeout(() => {\n          navigate(\"/profile\");\n        }, 1000);\n      }\n    } catch (err) {\n      setError(\"⚠️ Unable to connect to the server. Please try again later.\");\n    }\n  };\n\n  return (\n    <div className=\"login-page\">\n      <div className=\"login-container\">\n        <h1>Login</h1>\n        <form className=\"login-form\" onSubmit={handleSubmit}>\n          <input\n            type=\"text\"\n            name=\"identifier\"\n            placeholder=\"Enter Email or Username\"\n            className=\"login-input\"\n            value={formData.identifier}\n            onChange={handleChange}\n            required\n          />\n          <div className=\"password-wrapper\">\n            <input\n              type={passwordVisible ? \"text\" : \"password\"}\n              name=\"password\"\n              placeholder=\"Password\"\n              className=\"login-input password-input\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n            />\n            <button type=\"button\" className=\"toggle-password-btn\" onClick={togglePasswordVisibility}>\n              {passwordVisible ? \"Hide\" : \"Show\"}\n            </button>\n          </div>\n          <button type=\"submit\" className=\"login-btn\">Login</button>\n        </form>\n        {error && <div className=\"form-error\">{error}</div>}\n        {success && <div className=\"form-success\">{success}</div>}\n        <p className=\"login-footer\">\n          New to our service? <Link to=\"/signup\"><u>Sign Up Here</u></Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}